.TH mpkg-install 0.16 "Ноябрь 2010"
.SH ИМЯ
mpkg-install
.SH СИНТАКСИС
.B mpkg-install
[
.B -v --verbose
]
[
.B -g --dialog
]
[
.B -d --force-dep
]
[
.B -z --no-dep
]
[
.B -f --force-conflicts
]
[
.B -m --no-md5
]
[
.B -k --force-essential
]
[
.B -D --download-only
]
[
.B -y --noconfirm
]
[
.B -q --noreset
]
[
.B -c --no_resume
]
[
.B -F --fork
]
[
.B -Q --enqueue
]
[
.B --sysroot=<DIR>
]
[
.B -t --conf=ИМЯ_КОНФИГА
]
[
.B --download-to=<DIR>
]
[
.B -L --linksonly
]
.I ИМЯ_ФАЙЛА/ПАКЕТА
.SH ОПИСАНИЕ
Установка и обновление пакетов из репозитория или из локальных файлов.
.TP
Установка из локального файла:
.TP
.B mpkg-install [КЛЮЧИ] ИМЯ_ФАЙЛА
.TP
Установка из репозитория:
.TP
.B mpkg-install [КЛЮЧИ] ИМЯ_ПАКЕТА
.TP
При установке из репозитория можно дополнительно указать версию и билд, разделяя знаком '='. Например, мы хотим amarok 2.1.1 последнего билда:
.TP
.B mpkg-install amarok=2.1.1
.TP
А вот если мы хотим конкретно amarok 2.1.1 1-го билда:
.TP
.B mpkg-install amarok=2.1.1=1
.TP
Можно указывать любое количество пакетов одновременно, можно совмещать локальные пакеты и пакеты из репозитория в одном запросе:
.TP
.B mpkg-install amarok skype=2.0.0.67 /var/mpkg/packages/splashy-0.13.5-i686-1.tgz wxcam directfb=1.0.1=1
.TP
Можно использовать '*' для имени пакета и имен файлов. Следует иметь ввиду, что этот символ в первую очередь обрабатывается шеллом, поэтому, для имен пакетов запрос лучше окружать в кавычки, например вот так:
.TP
.B mpkg-install 'mpkg-*'
.TP
Если пакет с заданным именем уже установлен, то он будет обновлен до последней версии или указанной в команде.
.SH КЛЮЧИ
.TP
.B -v --verbose
Подробный вывод. В некоторых местах вывод будет чуть более подробным. 
.TP
.B -g --dialog
Использовать диалоговый интерфейс. Режим вывода переключается в ncurses — как при установке системы.
.TP
.B -d --force-dep
Игнорировать ошибки зависимостей. Если какие-то зависимости не могут быть удовлетворены — они будут просто опускаться. Тем не менее, 
.B mpkg
будет пытаться разобраться с ними насколько это возможно.
.TP
.B -z --no-dep
Полностью игнорировать существование зависимостей. Вообще отключить зависимости, будто их нет вовсе. В отличие от 
.B --force-dep
,
.B mpkg
не будет предпринимать вообще никаких попыток разобраться с зависимостями. 
.TP
.B -f --force-conflicts
Не выполнять проверку конфликтов файлов. Отключает проверку конфликтов файлов. Делать это КРАЙНЕ НЕ РЕКОМЕНДУЕТСЯ, данный ключ существует с доисторических времен и нужен в основном для отладки.
.TP
.B -m --no-md5
Не проверять целостность пакетов при установке. Отключение проверки контрольных сумм пакетов, которая по умолчанию происходит перед началом самой процедуры установки пакетов. Несколько ускоряет установку, однако появляется риск возникновения ошибки где-то посередине процесса из-за битого пакета.
.TP
.B -k --force-essential
Разрешить удаление системных пакетов. Разрешить удаление пакетов, занесенных в «красную книгу» — список системных пакетов, без которых ничего работать не будет. 
.TP
.B -D --download-only
Только скачать пакеты, не устанавливать. С данным ключом пакеты будут выкачаны в кеш, и на этом процесс будет прерван. 
.TP
.B -y --noconfirm
Не спрашивать подтверждений. Отключение запросов на подтверждение действий.
.TP
.B -q --noreset
Не сбрасывать очередь при запуске. По умолчанию, очередь сбрасывается перед установкой. Вы можете использовать этот ключ чтобы выполнить действия из очереди заодно с установкой новых пакетов. 
.TP
.B -c --no_resume
Отключить докачку. Вообще говоря, докачка по умолчанию отключена. Однако если вы включили её в конфиге, вы можете временно отключить её. 
.TP
.B -F --fork
Отсоединиться от терминала и работать в фоновом режиме. С этим ключом 
.B mpkg
перейдет в режим демона. Для каких-то особых случаев может быть полезно.
.TP
.B -Q --enqueue
Поставить действия в очередь, не исполнять. Установка будет добавлена в очередь, но выполняться не будет. Её можно будет проделать потом командой 
.B mpkg commit
или с ключом 
.B --noreset.
.TP
.B --sysroot=<DIR>
Временно переопределить путь к корню системы. Переопределить корень системы. Удобно, если вы ставите пакеты для chroot. 
.TP
.B -t --conf=ИМЯ_КОНФИГА
Использовать альтернативный конфигурационный файл.
.TP
.B --download-to=<DIR>
Скачать пакеты в указанную директорию. Можно использовать с ключом 
.B --download-only
, если хочется чтобы пакеты были выкачаны не в кеш а в указанную директорию. 
.TP
.B -L --linksonly
При выполнении 
.B install
или
.B upgradeall
, показывать ссылки для скачивания и выходить. Почти то же самое что и 
.B --download-only
, но вместо закачки пакетов будет выведен список ссылок на файлы, по которым потом можно будет скачать пакеты каким-нибудь сторонним менеджером закачек, например wget.
.SH ПРИМЕР
.TP 
.B mpkg install skype
Установка пакета из репозитория.
.TP
.B mpkg install /tmp/amarok-2.1.85-i486-1.txz
Установка пакета из локального файла.
.SH НЮАНСЫ
.TP
.B Порядок выбора репозитория
Если пакет доступен сразу в нескольких репозиториях, то выбирается первый из списка. Если указывается локальный файл — то он всегда первичнее. 
.TP
.B Порядок выбора версии
Если доступно несколько версий пакета, то выбирается пакет с максимальной версией. Сравнение версий идет с помощью 
функции 
.B strverscmp
. Если имеется несколько пакетов с одинаковой версией (быть может, разных сборок) — выбирается 
первый. Следует отметить, что пакет в нескольких местах но с одинаковой контрольной суммой — это один и тот же пакет 
с несколькими источниками и рассматривается как пакет, находящийся в нескольких репозиториях. Разные же пакеты 
различаются по контрольной сумме. 
.TP
.B Разные мелочи
.B mpkg install
и
.B mpkg upgrade
, де-факто, одна и та же команда.

